<div class="container" style="font-family: 'Roboto', sans-serif;">
  <!-- Crear nueva publicación -->
  <div class="mb-4 p-3 border rounded shadow-sm">
    <textarea [(ngModel)]="nuevaPublicacion"
              class="form-control mb-2"
              rows="3"
              placeholder="¿En qué estás pensando?"></textarea>

    <div class="d-flex justify-content-between align-items-center">
      <div>
        <i class="bi bi-image" style="color: #0093ab; font-size: 1.5rem; cursor: pointer;" title="Subir imagen"></i>
        <i class="bi bi-chat-left-text" style="color: #0093ab; font-size: 1.5rem; cursor: pointer;"
           (click)="agregarCampoComentarioAlPublicar()" title="Agregar comentario"></i>
      </div>

      <button class="btn btn-primary" (click)="publicar()">Publicar</button>
    </div>
  </div>

  <!-- Lista de publicaciones -->
  <div *ngFor="let post of posts; trackBy: trackByPostId" class="mb-4 p-3 border rounded shadow-sm">
    <p class="mb-2"><strong>{{ post.usuario }}</strong></p>
    <p>{{ post.contenido }}</p>

    <!-- Comentarios existentes -->
    <div *ngIf="post.comentarios.length > 0" class="mb-2">
      <div *ngFor="let comentario of post.comentarios">
        <p class="mb-1"><i class="bi bi-chat-dots" style="color: #0093ab;"></i> {{ comentario }}</p>
      </div>
    </div>

    <!-- Campos para nuevos comentarios -->
    <div *ngFor="let comentario of post.nuevosComentarios; let i = index; trackBy: trackByIndex" class="mb-2">
      <input type="text"
             [(ngModel)]="post.nuevosComentarios[i]"
             class="form-control mb-1"
             placeholder="Escribe un comentario">
      <button class="btn btn-sm btn-outline-primary" (click)="comentar(post, i)">Comentar</button>
    </div>

    <!-- Icono para agregar más campos de comentarios -->
    <div class="text-end">
      <i class="bi bi-plus-circle" style="color: #0093ab; font-size: 1.5rem; cursor: pointer;"
         (click)="agregarCampoComentario(post)" title="Agregar otro comentario"></i>
    </div>
  </div>
</div>
