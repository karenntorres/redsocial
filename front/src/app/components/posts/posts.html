<div class="container" style="font-family: 'Roboto', sans-serif; max-width: 800px;">
  <!-- Crear nueva publicación -->
  <div class="mb-4 p-4 border rounded shadow-sm bg-white">
    <textarea [(ngModel)]="nuevaPublicacion"
              class="form-control mb-3"
              rows="3"
              placeholder="Share a glim of your day"></textarea>

    <div class="d-flex justify-content-between align-items-center">
      <div class="d-flex gap-3">
        <i class="bi bi-image"
           style="color: #0093ab; font-size: 1.5rem; cursor: pointer;"
           title="Upload image"></i>
        <i class="bi bi-chat-left-text"
           style="color: #0093ab; font-size: 1.5rem; cursor: pointer;"
           (click)="agregarCampoComentarioAlPublicar()"
           title="Add comment field"></i>
      </div>

      <button class="btn" style="background-color: #0093ab; color: white;" (click)="publicar()">
        Post
      </button>
    </div>
  </div>

  <!-- Lista de publicaciones -->
  <div *ngFor="let post of posts; trackBy: trackByPostId" class="mb-4 p-4 border rounded shadow-sm bg-white">
    <p class="mb-1 fw-bold">{{ post.usuario }}</p>
    <p class="mb-3">{{ post.contenido }}</p>

    <!-- Comentarios existentes -->
    <div *ngIf="post.comentarios.length > 0" class="mb-3 ps-2 border-start border-3" style="border-color: #0093ab;">
      <div *ngFor="let comentario of post.comentarios">
        <p class="mb-1 text-muted">
          <i class="bi bi-chat-dots" style="color: #0093ab;"></i> {{ comentario }}
        </p>
      </div>
    </div>

    <!-- Nuevos comentarios -->
    <div *ngFor="let comentario of post.nuevosComentarios; let i = index; trackBy: trackByIndex" class="mb-3">
      <div class="d-flex gap-2 align-items-center">
        <input type="text"
               [(ngModel)]="post.nuevosComentarios[i]"
               class="form-control"
               placeholder="Write a comment...">
        <button class="btn btn-sm"
                style="background-color: #0093ab; color: white;"
                (click)="comentar(post, i)">
          Comment
        </button>
      </div>
    </div>

    <!-- Botón para agregar nuevo campo de comentario -->
    <div class="text-end">
      <i class="bi bi-plus-circle"
         style="color: #0093ab; font-size: 1.5rem; cursor: pointer;"
         (click)="agregarCampoComentario(post)"
         title="Add another comment field"></i>
    </div>
  </div>
</div>
